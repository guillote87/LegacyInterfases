<mvc:View controllerName="legacy.controller.MainView"
	xmlns:mvc="sap.ui.core.mvc" displayBlock="true"
	xmlns="sap.m"
	xmlns:core="sap.ui.core"
	xmlns:chart="sap.suite.ui.microchart"
	xmlns:fb="sap.ui.comp.filterbar"
	xmlns:l="sap.ui.layout">
	<Shell >
		<Page id="page" title="{i18n>title}">
			<VBox class="sapUiResponsiveMargin">
				<l:HorizontalLayout id="TileContainerExpanded" allowWrapping="true" content="{path :'/tiles' ,factory :'.createTiles'}" class="sapUiSmallMargin">
				</l:HorizontalLayout>
			</VBox>
			<VBox id="tableVBox" class="sapUiResponsiveMargin" alignContent="Center" visible="false">
				<!-- <OverflowToolbar id="search" style="Clear" visible="false">
				<SearchField id="searchFilter" placeholder="Buscar Org. Venta" search="searchFilter" width="15rem"/>
				<DateRangeSelection id="fecha" width="13rem" valueFormat="YYYYMMdd" displayFormat="dd.MM.yyyy" change="searchFilter"/>
			</OverflowToolbar> -->
				<fb:FilterBar id="filterBar" useToolbar="false" reset="onReset" search="searchFilter" clear="onClear" cancel="onCancel">
					<fb:filterGroupItems>
						<fb:FilterGroupItem groupName="G1" visibleInFilterBar="true" name="orgvta" label="Org Venta">
							<fb:control  >
								<!-- <Input id="orgVta" width="50%"></Input> -->
								<ComboBox id="orgVta" showSecondaryValues="true" items="{
										model: 'org',
										path: '/OrgVentaSet',
										sorter: { path: 'Nombre' }
										}">
									<core:ListItem key="{org>Id}" text="{org>Id}" additionalText="{org>Nombre}" />
								</ComboBox>
							</fb:control>
						</fb:FilterGroupItem>
						<fb:FilterGroupItem groupName="G2" name="fecha" label="{i18n>dateRange}" visibleInFilterBar="true">
							<fb:control  >
								<DateRangeSelection id="fecha" valueFormat="dd.MM.yyyy" displayFormat='MMMM d, yyyy' change="onDateChange" />
							</fb:control>
						</fb:FilterGroupItem>
						<fb:FilterGroupItem groupName="G3" name=" " visibleInFilterBar="true" label="Limpiar Filtros">
							<fb:control >
								<Button class="stretch" icon="sap-icon://clear-filter" press="onCleanFilters" />
							</fb:control>
						</fb:FilterGroupItem>
					</fb:filterGroupItems>
				</fb:FilterBar>

				<Table id="interfaseTable" 
					   items="{path:'FilteredErrors>/',
					           sorter: {path: 'Fecha',
							   descending: true
							   }}"  
				       growing="true" 
					   growingThreshold="30"
					   >
					<columns>
						<Column >
							<Text text="OrgVentas"/>
						</Column>
						<Column minScreenWidth="Small" width="auto" demandPopin="true">
							<Text text="Fecha" />
						</Column>
						<Column minScreenWidth="Small" demandPopin="true">
							<Text text="Hora" />
						</Column>
						<Column minScreenWidth="Small" demandPopin="false">
							<Text text="Operacion" />
						</Column>
						<Column minScreenWidth="Small" demandPopin="true">
							<Text text="Mensaje"/>
						</Column>
						<Column >
							<Text text="PedidoSAP"/>
						</Column>
						<Column >
							<Text text="ClienteSap"/>
						</Column>
						<Column minScreenWidth="Small" demandPopin="false">
							<Text text="PedidoPortal"/>
						</Column>
						<Column minScreenWidth="Small" demandPopin="false">
							<Text text="IdSite"/>
						</Column>
						<Column >
							<Text text="Oportunidad"/>
						</Column>
					</columns>
					<items>
						<ColumnListItem vAlign="Middle" type="Navigation" press=".onPress">
							<cells>
								<Text text="{FilteredErrors>OrgVentas}"/>
								<Text text="{path: 'FilteredErrors>Fecha',
											 type:'sap.ui.model.type.Date',
											 formatOptions: {
															style:'long',
															source: {
														pattern: 'MMMM d, yyyy'
														}
														}
														}"/>
								<Text text="{path:'FilteredErrors>Hora',
											 type:'sap.ui.model.type.Time',
											 formatOptions: {
															source: {
														pattern: 'HH:mm:ss'
														}
														}
														}"/>
								<Text text="{FilteredErrors>Operacion}"/>
								<Text text="{FilteredErrors>Mensaje}"/>
								<Text text="{FilteredErrors>PedidoSAP}"/>
								<Text text="{FilteredErrors>ClienteSAP}"/>
								<Text text="{FilteredErrors>PedidoPortal}"/>
								<Text text="{FilteredErrors>IdSite}"/>
								<Text text="{FilteredErrors>Oportunidad}"/>
							</cells>
						</ColumnListItem>
					</items>
				</Table>
			</VBox>
		</Page>
	</Shell>
</mvc:View>